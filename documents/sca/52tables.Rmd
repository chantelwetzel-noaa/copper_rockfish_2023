\clearpage
# Tables

<!-- ======================================================= -->
<!-- ***************    Catches      *********************** --> 
<!-- ======================================================= -->

```{r, results = 'asis'}

years = startyr:endyr
nfleets = 4
dead_all = NULL

for (i in 1:nfleets){
  name = paste0("dead(B):_",i)
  dead = model$timeseries[model$timeseries$Yr %in% years, name]
  dead_all = cbind(dead_all, dead)
}
total.dead  <- round(apply(dead_all, 1, sum), 1)
out = cbind(years, round(dead_all, 1), total.dead)
out = as.data.frame(out)
col_names = c("Year", "Commercial (Dead)", "Commercial (Live)", "Rec. CPFV", "Rec. PR", "Total Landings")

table_format(x = out,
             caption = "Removals (mt) by fleet and the summed total landings (mt).",
             label = "allcatches",
             digits = 1,
             align = 'l',
             col_names = col_names)
```

\newpage

<!-- ======================================================= --> 
<!-- *********** Removals vs. OFL/ACL   ******************** --> 
<!-- ======================================================= --> 

```{r, results = 'asis'}

create_management_table(
  management_dir = management_dir, 
  doc_dir = doc_dir, 
  doc_names = c("nca", 'sca'),
  years = 2012:2022,
  table_names = c("copper_ca_north.csv", "copper_ca_south.csv"),
  prefix = NULL)

```

\newpage

<!-- ======================================================= -->
<!-- *************** Com. Catch Ratio  ********************* --> 
<!-- ======================================================= -->

\include{tex_tables/historical_landings_tables_2020_revised_Avila_1953.tex}

\newpage

<!-- ======================================================= -->
<!-- *************** Commercial Data *********************** --> 
<!-- ======================================================= -->

\include{tex_tables/south_dead_trips_and_samples.tex}

\newpage

\include{tex_tables/south_live_trips_and_samples.tex}

\newpage

<!-- ======================================================= -->
<!-- ************* Recreational Data *********************** --> 
<!-- ======================================================= -->

\include{tex_tables/rec_south_sample_size_by_program.tex}


\newpage


<!-- ======================================================= -->
<!-- ***************   Discard Data  *********************** --> 
<!-- ======================================================= -->



<!-- ======================================================= -->
<!-- ********************   CCFRP    *********************** --> 
<!-- ======================================================= -->

\input{tex_tables/south_ccfrp_drifts_length_ages.tex}

\newpage

<!-- ======================================================= -->
<!-- *************  NWFSC HKL  Data  *********************** --> 
<!-- ======================================================= -->


\input{tex_tables/nwfsc_hkl_positive_samples_by_year.tex}

\pagebreak

\input{tex_tables/nwfsc_hkl_positive_samples_by_depth.tex}

\pagebreak

\input{tex_tables/nwfsc_hkl_sample_number_by_site_cca.tex}

\pagebreak

\input{tex_tables/nwfsc_hkl_effn_lengths_ages.tex}


<!-- ======================================================= -->
<!-- *************     CDFW  ROV     *********************** --> 
<!-- ======================================================= -->

\input{tex_tables/rov_south_samples_transects.tex}

\newpage

<!-- ======================================================= -->
<!-- *************    Growth Ages    *********************** --> 
<!-- ======================================================= -->

\input{tex_tables/south_growth_age_samples.tex}

\newpage

<!-- ======================================================= -->
<!-- *************  PISCO SAMPLES    *********************** --> 
<!-- ======================================================= -->


```{r, results = 'asis'}

tab <- read.csv(file.path(data_dir, "survey_indices", "pisco", "nCPR_table_N_S.csv"))
col_names <- c("Year", "UCSC Raw Count", "UCSC Filtered Count", "UCSB Raw Count", "UCSB Filtered Count")

table_format(x = tab,
             caption = "All and filtered observations by year and sampling institution for PISCO.",
             label = "pisco-data",
             align = 'l',
             col_names = col_names)
```



<!-- ======================================================= -->
<!-- *************  NWFSC WCGBT  Data  *********************** --> 
<!-- ======================================================= -->

\input{tex_tables/wcgbt_samples_by_year.tex}

\newpage

<!-- ======================================================= -->
<!-- ***********   Model Structure      ******************** --> 
<!-- ======================================================= -->

\input{tex_tables/model_structure_south.tex}

\newpage

<!-- ======================================================= -->
<!-- ***********   Model Parameters     ******************** --> 
<!-- ======================================================= -->


```{r, results = 'asis'}
mod_params = model$parameters[, 
                                (names(model$parameters) %in%
                                c("Num","Label","Value","Phase","Min",
                                  "Max","Status","Parm_StDev",
                                  "Pr_type","Prior","Pr_SD"))] 
mod_params[,'Value'] = round(as.numeric(mod_params[,'Value']),3)                                 
# Combine bounds into one column
mod_params$Min = paste('(', mod_params$Min, ', ', mod_params$Max, ')', sep='')
# Combine prior info to one column
mod_params$PR_type = ifelse(mod_params$Pr_type == 'No_prior' , 'None', paste(mod_params$Pr_type,' (', mod_params$Prior,  ', ', mod_params$Pr_SD, ')', sep = ''))
# Set long value to scientific notation
mod_params[mod_params$Label == "Wtlen_1_Fem",3] = format(mod_params[mod_params$Label == "Wtlen_1_Fem",3], scientific = TRUE)
mod_params[mod_params$Label == "Wtlen_1_Mal",3] = format(as.numeric(mod_params[mod_params$Label == "Wtlen_1_Mal",3]), scientific = TRUE)
mod_params[mod_params$Label == "Eggs_scalar_Fem",3] = format(as.numeric(mod_params[mod_params$Label == "Eggs_scalar_Fem",3]), scientific = TRUE)
mod_params[mod_params$Label == "L_at_Amax_Mal_GP_1",3] = round(as.numeric(mod_params[mod_params$Label == "L_at_Amax_Mal_GP_1",3]), 4)
mod_params[mod_params$Label == "VonBert_K_Mal_GP_1",3] = round(as.numeric(mod_params[mod_params$Label == "VonBert_K_Mal_GP_1",3]), 3)
mod_params[mod_params$Label == "CV_old_Mal_GP_1",3] = round(as.numeric(mod_params[mod_params$Label == "CV_old_Mal_GP_1",3]), 3)
# Remove the max, prior and prior sd columns
drops = c('Max', 'Prior', 'Pr_type', 'Pr_SD', 'Num')
mod_params = mod_params[, !(names(mod_params) %in% drops)]
rownames(mod_params) = c()
mod_params[,"Label"] = gsub("\\_", " ", mod_params[,"Label"])
mod_params[,"PR_type"] = gsub("\\_", " ", mod_params[,"PR_type"])
# Add column names
col_names = c('Parameter',
                         'Value',
                         'Phase',
                         'Bounds',
                         'Status',
                         'SD',
                         'Prior (Exp.Val, SD)')
table_format(x = mod_params,
             caption = "List of parameters used in the base model, including estimated values and standard deviations (SD), bounds (minimum and maximum), estimation phase (negative values not estimated), status (indicates if parameters are near bounds), and prior type information (mean and SD).",
             label = "params",
             align = 'l',
             col_names = col_names,
             longtable = TRUE,
             font_size = 9,
             landscape = TRUE,
             custom_width = TRUE,
             col_to_adjust = c(1,7), 
             width = c("7cm", "4cm"))                         
```

\newpage

<!-- ======================================================= -->
<!-- ***********    Like Contributions  ******************** --> 
<!-- ======================================================= -->

\include{tex_tables/south_likelihoods.tex}

\newpage

<!-- ======================================================= -->
<!-- ********  Reference Points & Management *************** --> 
<!-- ======================================================= -->

\include{tex_tables/south_e_ReferencePoints.tex}

\newpage


<!-- ======================================================= -->
<!-- ***********       Time Series      ******************** --> 
<!-- ======================================================= -->

\include{tex_tables/south_TimeSeries.tex}


\newpage


```{r, results = 'asis'}
create_biomass_table(
    doc_dir = doc_dir, 
    prefix = NULL,
    doc_names = c("nca", 'sca'),
    years = 1916:2023)

```

\newpage


<!-- ======================================================= -->
<!-- ****************     Sensitivities      *************** --> 
<!-- ======================================================= -->


\include{tex_tables/sensitivities_1_final.tex}



\newpage



```{r, results = 'asis'}
tab <- read.csv(file.path(sens_dir, "data_weights.csv"))
col_names <- c("Fleet", "Data Type", "Francis", "MI", "Dirichlet")

sa4ss::table_format(x = tab,
             caption = "Suggested data weights for each data weighting methodology by fleet and data type.",
             label = "dw",
             align = 'l',
             digits = 2,
             col_names = col_names) 
```



\include{tex_tables/sensitivities_2_final.tex}

\newpage

\include{tex_tables/sensitivities_3_final.tex}

\newpage

<!-- ======================================================= -->
<!-- ********  Reference Points & Management *************** --> 
<!-- ======================================================= -->


```{r, results = 'asis'}

create_projection_table(
    management_dir = management_dir, 
    doc_dir = doc_dir, 
    fixed_removals = c(70, 70),
    doc_names = c("nca", 'sca'),
    years = 2023:2034,
    table_names = c("copper_ca_north.csv", "copper_ca_south.csv"),
    prefix = NULL)

```

\newpage
